<apex:page standardController="Opportunity" extensions="createFFinvoiceEXT" title="{!Opportunity.Name}: Create FF Invoice" showHeader="true" sidebar="false" docType="html-5.0">
    <apex:sectionHeader title="{!Opportunity.Name}" subtitle="Create FinancialForce Invoice"/>
    <apex:form >
        <apex:pageBlock title="Invoice Info">
            <apex:pageBlockButtons >
                <apex:commandButton value="Create" action="{!createInvoice}"/>
                <apex:commandButton value="Cancel" action="{!cancel}"/>
            </apex:pageBlockButtons>
            <apex:messages />
            <apex:pageBlockSection title="Billing Info" collapsible="false">
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Billing Account"/>
                    <apex:inputField value="{!opp.Billing_Account__c}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!opp.Billing_Account__c = NULL}">
                    <apex:outputLabel value="Account"/>
                    <apex:outputField value="{!opp.AccountId}"  />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem rendered="{!opp.Billing_Account__c <> NULL}">
                    <apex:outputLabel value="Account"/>
                    <apex:outputField value="{!opp.Billing_Account__r.Account__c}"  />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Billing Contact"/>
                    <apex:outputField value="{!opp.Billing_Contact__c}" />
                </apex:pageBlockSectionItem>
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Billing Street"/>
                    <apex:outputField value="{!opp.Billing_Street__c}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Billing City"/>
                    <apex:outputField value="{!opp.Billing_City__c}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Billing State"/>
                    <apex:outputField value="{!opp.Billing_State__c}" />
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel value="Billing Zip"/>
                    <apex:outputField value="{!opp.Billing_Zip_Code__c}" />
                </apex:pageBlockSectionItem>
            </apex:pageBlockSection>
            <apex:pageBlockSection title="Opportunity Line Items" collapsible="false" columns="1">
                <apex:pageBlockTable value="{!oppLnItms}" var="lnItm">
                    <apex:column >
                        <apex:facet name="header">
                            <apex:outputText value="Product"/>
                        </apex:facet>
                        <apex:outputField value="{!lnItm.Product2Id}"/>
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">
                            <apex:outputText value="Quantity"/>
                        </apex:facet>
                        <apex:inputField value="{!lnItm.Quantity}" required="true"/>
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">
                            <apex:outputText value="Sales Price"/>
                        </apex:facet>
                        <apex:inputField value="{!lnItm.UnitPrice}" required="true"/>
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">
                            <apex:outputText value="Line Description"/>
                        </apex:facet>
                        <apex:inputField value="{!lnItm.Description}"/>
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">
                            <apex:outputText value="Dimension 1"/>
                        </apex:facet>
                        <apex:inputField value="{!lnItm.Dimension_1__c}" required="true"/>
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">
                            <apex:outputText value="Dimension 2"/>
                        </apex:facet>
                        <apex:inputField value="{!lnItm.Dimension_2__c}" required="true"/>
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">
                            <apex:outputText value="Dimension 3"/>
                        </apex:facet>
                        <apex:inputField value="{!lnItm.Dimension_3__c}"/>
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">
                            <apex:outputText value="Dimension 4"/>
                        </apex:facet>
                        <apex:inputField value="{!lnItm.Dimension_4__c}"/>
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">
                            <apex:outputText value="Ready to Invoice"/>
                        </apex:facet>
                        <apex:inputField value="{!lnItm.Ready_to_Invoice__c}"/>
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">
                            <apex:outputText value="Invoiced"/>
                        </apex:facet>
                        <apex:inputField value="{!lnItm.Invoiced__c}"/>
                    </apex:column>
                </apex:pageBlockTable>
            </apex:pageBlockSection>
        </apex:pageBlock>
    </apex:form>
</apex:page>